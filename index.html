<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bear Sending Hearts</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #ffe6f0;
}
canvas { display: block; }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const bear = {
  x: 150,
  y: canvas.height - 250,
  size: 100
};

const hearts = [];
const heartCount = 60;
const letters = [];
const word = "I'm always here";
let frame = 0;
let kissHeart = null;

// Генерация сердечек
function createHeart() {
  hearts.push({
    x: bear.x + 50,
    y: bear.y - 50,
    vx: Math.random() * 2 - 1,
    vy: Math.random() * -3 - 2,
    size: Math.random()*15+10,
    color: `rgba(255,${Math.floor(Math.random()*100+100)},${Math.floor(Math.random()*100+100)},1)`
  });
}

// Рисуем мишку
function drawBear() {
  const {x,y,size} = bear;
  // тело
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(x,y,size,0,Math.PI*2);
  ctx.fill();
  // уши
  ctx.beginPath();
  ctx.arc(x-size*0.6, y-size*0.6, size*0.4,0,Math.PI*2);
  ctx.arc(x+size*0.6, y-size*0.6, size*0.4,0,Math.PI*2);
  ctx.fill();
  // глаза
  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.arc(x-size*0.3,y-size*0.2,10,0,Math.PI*2);
  ctx.arc(x+size*0.3,y-size*0.2,10,0,Math.PI*2);
  ctx.fill();
  // нос
  ctx.beginPath();
  ctx.arc(x,y+10,15,0,Math.PI*2);
  ctx.fill();
  // рот (улыбка)
  ctx.beginPath();
  ctx.arc(x, y+20, 20, 0, Math.PI);
  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2;
  ctx.stroke();
}

// Обновление сердец
function updateHearts() {
  hearts.forEach((h,i)=>{
    h.x += h.vx;
    h.y += h.vy;
    h.vy += 0.05; // гравитация

    if(h.y < canvas.height/2 && frame>150){
      // собираем в буквы
      const idx = i%word.length;
      const letterX = canvas.width/2 - (word.length*25) + idx*50 + Math.random()*10;
      const letterY = canvas.height/2 + Math.random()*10;
      letters.push({x:letterX,y:letterY,size:h.size,color:h.color,letter:word[idx]});
      hearts.splice(i,1);
    }
  });

  // После того как все буквы собраны, запускаем поцелуй
  if(letters.length >= word.length && !kissHeart){
    kissHeart = {x:bear.x, y:bear.y - 50, vx:4, vy:-3, size:20, color:"rgba(255,100,150,1)"};
  }

  if(kissHeart){
    kissHeart.x += kissHeart.vx;
    kissHeart.y += kissHeart.vy;
    kissHeart.vy += 0.05;
  }
}

// Рисуем сердца
function drawHearts() {
  hearts.forEach(h=>{
    ctx.beginPath();
    ctx.arc(h.x,h.y,h.size/2,0,Math.PI*2);
    ctx.fillStyle = h.color;
    ctx.fill();
  });
}

// Рисуем слово из сердец
function drawLetters() {
  letters.forEach(l=>{
    ctx.fillStyle = l.color;
    ctx.font = `${l.size}px Arial`;
    ctx.fillText(l.letter,l.x,l.y);
  });
}

// Рисуем воздушный поцелуй
function drawKiss() {
  if(kissHeart){
    ctx.beginPath();
    ctx.arc(kissHeart.x,kissHeart.y,kissHeart.size,0,Math.PI*2);
    ctx.fillStyle = kissHeart.color;
    ctx.fill();
  }
}

// Анимация
function animate(){
  frame++;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBear();
  if(frame%5===0 && letters.length<word.length) createHeart();
  updateHearts();
  drawHearts();
  drawLetters();
  drawKiss();
  requestAnimationFrame(animate);
}

animate();

window.addEventListener('resize',()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>

